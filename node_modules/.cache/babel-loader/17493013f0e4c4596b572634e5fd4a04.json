{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _objectSpread from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import Aux from\"../../hoc/Aux/Aux\";import Burger from\"../../components/Burger/Burger\";import BuildControls from\"../../components/Burger/BuildControls/BuildControls\";import Modal from\"../../components/UI/Modal/Modal\";import OrderSummary from\"../../components/Burger/OrderSummary/OrderSummary\";import axios from\"../../axios-orders\";import Spinner from\"../../components/UI/Spinner/Spinner\";import withErrorHandler from\"../../hoc/withErrorHandler/withErrorHandler\";import*as actions from\"../../store/actions/index\";var BurgerBuilder=/*#__PURE__*/function(_Component){_inherits(BurgerBuilder,_Component);var _super=_createSuper(BurgerBuilder);function BurgerBuilder(){var _this;_classCallCheck(this,BurgerBuilder);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={purchasing:false,loading:false};_this.purchaseHandler=function(){if(_this.props.isAuthenticated){_this.setState({purchasing:true});}else{_this.props.onSetAuthRedirectPath(\"/checkout\");_this.props.history.push(\"/auth\");}};_this.purchaseCancelHandler=function(){_this.setState({purchasing:false});};_this.purchaseContinueHandler=function(){_this.props.onInitPurchased();_this.props.history.push(\"/checkout\");};return _this;}_createClass(BurgerBuilder,[{key:\"componentDidMount\",value:function componentDidMount(){this.props.onInitIngredients();}},{key:\"updatePurchaseState\",value:function updatePurchaseState(ingredients){var sum=Object.keys(ingredients).map(function(igKey){return ingredients[igKey];}).reduce(function(sum,el){return sum+el;},0);return sum>0;}},{key:\"render\",value:function render(){var disabledInfo=_objectSpread({},this.props.ingredients);for(var key in disabledInfo){disabledInfo[key]=disabledInfo[key]<=0;}// {salad: true, meat: false, ...}\nvar orderSummary=null;var burger=this.props.error?/*#__PURE__*/_jsx(\"p\",{children:\"Ingredients can't be loaded\"}):/*#__PURE__*/_jsx(Spinner,{});if(this.props.ingredients){burger=/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Burger,{ingredients:this.props.ingredients}),/*#__PURE__*/_jsx(BuildControls,{ingredientAdded:this.props.onIngredientAdded,ingredientRemoved:this.props.onIngredientRemoved,disabled:disabledInfo,purchasable:this.updatePurchaseState(this.props.ingredients),ordered:this.purchaseHandler,isAuthenticated:this.props.isAuthenticated,price:this.props.totalPrice})]});orderSummary=/*#__PURE__*/_jsx(OrderSummary,{ingredients:this.props.ingredients,price:this.props.totalPrice,purchaseCancelled:this.purchaseCancelHandler,purchaseContinued:this.purchaseContinueHandler});}return/*#__PURE__*/_jsxs(Aux,{children:[/*#__PURE__*/_jsx(Modal,{show:this.state.purchasing,modalClosed:this.purchaseCancelHandler,children:orderSummary}),burger]});}}]);return BurgerBuilder;}(Component);var mapStateToProps=function mapStateToProps(state){return{ingredients:state.burgerBuilder.ingredients,totalPrice:state.burgerBuilder.totalPrice,error:state.burgerBuilder.error,isAuthenticated:state.auth.token!==null};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onIngredientAdded:function onIngredientAdded(ingName){return dispatch(actions.addIngredient(ingName));},onIngredientRemoved:function onIngredientRemoved(ingName){return dispatch(actions.removeIngredient(ingName));},onInitIngredients:function onInitIngredients(){return dispatch(actions.initIngredient());},onInitPurchased:function onInitPurchased(){return dispatch(actions.purchaseInit());},onSetAuthRedirectPath:function onSetAuthRedirectPath(path){return dispatch(actions.setAuthRediectPath(path));}};};export default connect(mapStateToProps,mapDispatchToProps)(withErrorHandler(BurgerBuilder,axios));","map":{"version":3,"sources":["/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","actions","BurgerBuilder","state","purchasing","loading","purchaseHandler","props","isAuthenticated","setState","onSetAuthRedirectPath","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchased","onInitIngredients","ingredients","sum","Object","keys","map","igKey","reduce","el","disabledInfo","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","updatePurchaseState","totalPrice","mapStateToProps","burgerBuilder","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredient","purchaseInit","path","setAuthRediectPath"],"mappings":"qnCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,OAAT,KAAwB,aAAxB,CAEA,MAAOC,CAAAA,GAAP,KAAgB,mBAAhB,CACA,MAAOC,CAAAA,MAAP,KAAmB,gCAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,qDAA1B,CACA,MAAOC,CAAAA,KAAP,KAAkB,iCAAlB,CACA,MAAOC,CAAAA,YAAP,KAAyB,mDAAzB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qCAApB,CACA,MAAOC,CAAAA,gBAAP,KAA6B,6CAA7B,CACA,MAAO,GAAKC,CAAAA,OAAZ,KAAyB,2BAAzB,C,GAEMC,CAAAA,a,uVACLC,K,CAAQ,CACPC,UAAU,CAAE,KADL,CAEPC,OAAO,CAAE,KAFF,C,OAoBRC,e,CAAkB,UAAM,CACvB,GAAI,MAAKC,KAAL,CAAWC,eAAf,CAAgC,CAC/B,MAAKC,QAAL,CAAc,CAAEL,UAAU,CAAE,IAAd,CAAd,EACA,CAFD,IAEO,CACN,MAAKG,KAAL,CAAWG,qBAAX,CAAiC,WAAjC,EACA,MAAKH,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,OAAxB,EACA,CACD,C,OAEDC,qB,CAAwB,UAAM,CAC7B,MAAKJ,QAAL,CAAc,CAAEL,UAAU,CAAE,KAAd,CAAd,EACA,C,OAEDU,uB,CAA0B,UAAM,CAC/B,MAAKP,KAAL,CAAWQ,eAAX,GACA,MAAKR,KAAL,CAAWI,OAAX,CAAmBC,IAAnB,CAAwB,WAAxB,EACA,C,sGA/BmB,CACnB,KAAKL,KAAL,CAAWS,iBAAX,GACA,C,gEAEmBC,W,CAAa,CAChC,GAAMC,CAAAA,GAAG,CAAGC,MAAM,CAACC,IAAP,CAAYH,WAAZ,EACVI,GADU,CACN,SAACC,KAAD,CAAW,CACf,MAAOL,CAAAA,WAAW,CAACK,KAAD,CAAlB,CACA,CAHU,EAIVC,MAJU,CAIH,SAACL,GAAD,CAAMM,EAAN,CAAa,CACpB,MAAON,CAAAA,GAAG,CAAGM,EAAb,CACA,CANU,CAMR,CANQ,CAAZ,CAOA,MAAON,CAAAA,GAAG,CAAG,CAAb,CACA,C,uCAoBQ,CACR,GAAMO,CAAAA,YAAY,kBACd,KAAKlB,KAAL,CAAWU,WADG,CAAlB,CAGA,IAAK,GAAIS,CAAAA,GAAT,GAAgBD,CAAAA,YAAhB,CAA8B,CAC7BA,YAAY,CAACC,GAAD,CAAZ,CAAoBD,YAAY,CAACC,GAAD,CAAZ,EAAqB,CAAzC,CACA,CACD;AACA,GAAIC,CAAAA,YAAY,CAAG,IAAnB,CACA,GAAIC,CAAAA,MAAM,CAAG,KAAKrB,KAAL,CAAWsB,KAAX,cACZ,kDADY,cAGZ,KAAC,OAAD,IAHD,CAKA,GAAI,KAAKtB,KAAL,CAAWU,WAAf,CAA4B,CAC3BW,MAAM,cACL,MAAC,GAAD,yBACC,KAAC,MAAD,EAAQ,WAAW,CAAE,KAAKrB,KAAL,CAAWU,WAAhC,EADD,cAEC,KAAC,aAAD,EACC,eAAe,CAAE,KAAKV,KAAL,CAAWuB,iBAD7B,CAEC,iBAAiB,CAAE,KAAKvB,KAAL,CAAWwB,mBAF/B,CAGC,QAAQ,CAAEN,YAHX,CAIC,WAAW,CAAE,KAAKO,mBAAL,CAAyB,KAAKzB,KAAL,CAAWU,WAApC,CAJd,CAKC,OAAO,CAAE,KAAKX,eALf,CAMC,eAAe,CAAE,KAAKC,KAAL,CAAWC,eAN7B,CAOC,KAAK,CAAE,KAAKD,KAAL,CAAW0B,UAPnB,EAFD,GADD,CAcAN,YAAY,cACX,KAAC,YAAD,EACC,WAAW,CAAE,KAAKpB,KAAL,CAAWU,WADzB,CAEC,KAAK,CAAE,KAAKV,KAAL,CAAW0B,UAFnB,CAGC,iBAAiB,CAAE,KAAKpB,qBAHzB,CAIC,iBAAiB,CAAE,KAAKC,uBAJzB,EADD,CAQA,CAED,mBACC,MAAC,GAAD,yBACC,KAAC,KAAD,EACC,IAAI,CAAE,KAAKX,KAAL,CAAWC,UADlB,CAEC,WAAW,CAAE,KAAKS,qBAFnB,UAIEc,YAJF,EADD,CAOEC,MAPF,GADD,CAWA,C,2BAzF0BrC,S,EA4F5B,GAAM2C,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAC/B,KAAD,CAAW,CAClC,MAAO,CACNc,WAAW,CAAEd,KAAK,CAACgC,aAAN,CAAoBlB,WAD3B,CAENgB,UAAU,CAAE9B,KAAK,CAACgC,aAAN,CAAoBF,UAF1B,CAGNJ,KAAK,CAAE1B,KAAK,CAACgC,aAAN,CAAoBN,KAHrB,CAINrB,eAAe,CAAEL,KAAK,CAACiC,IAAN,CAAWC,KAAX,GAAqB,IAJhC,CAAP,CAMA,CAPD,CASA,GAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,QAAD,CAAc,CACxC,MAAO,CACNT,iBAAiB,CAAE,2BAACU,OAAD,QAAaD,CAAAA,QAAQ,CAACtC,OAAO,CAACwC,aAAR,CAAsBD,OAAtB,CAAD,CAArB,EADb,CAENT,mBAAmB,CAAE,6BAACS,OAAD,QACpBD,CAAAA,QAAQ,CAACtC,OAAO,CAACyC,gBAAR,CAAyBF,OAAzB,CAAD,CADY,EAFf,CAINxB,iBAAiB,CAAE,mCAAMuB,CAAAA,QAAQ,CAACtC,OAAO,CAAC0C,cAAR,EAAD,CAAd,EAJb,CAKN5B,eAAe,CAAE,iCAAMwB,CAAAA,QAAQ,CAACtC,OAAO,CAAC2C,YAAR,EAAD,CAAd,EALX,CAMNlC,qBAAqB,CAAE,+BAACmC,IAAD,QAAUN,CAAAA,QAAQ,CAACtC,OAAO,CAAC6C,kBAAR,CAA2BD,IAA3B,CAAD,CAAlB,EANjB,CAAP,CAQA,CATD,CAWA,cAAerD,CAAAA,OAAO,CACrB0C,eADqB,CAErBI,kBAFqB,CAAP,CAGbtC,gBAAgB,CAACE,aAAD,CAAgBJ,KAAhB,CAHH,CAAf","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as actions from \"../../store/actions/index\";\n\nclass BurgerBuilder extends Component {\n\tstate = {\n\t\tpurchasing: false,\n\t\tloading: false,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.props.onInitIngredients();\n\t}\n\n\tupdatePurchaseState(ingredients) {\n\t\tconst sum = Object.keys(ingredients)\n\t\t\t.map((igKey) => {\n\t\t\t\treturn ingredients[igKey];\n\t\t\t})\n\t\t\t.reduce((sum, el) => {\n\t\t\t\treturn sum + el;\n\t\t\t}, 0);\n\t\treturn sum > 0;\n\t}\n\n\tpurchaseHandler = () => {\n\t\tif (this.props.isAuthenticated) {\n\t\t\tthis.setState({ purchasing: true });\n\t\t} else {\n\t\t\tthis.props.onSetAuthRedirectPath(\"/checkout\");\n\t\t\tthis.props.history.push(\"/auth\");\n\t\t}\n\t};\n\n\tpurchaseCancelHandler = () => {\n\t\tthis.setState({ purchasing: false });\n\t};\n\n\tpurchaseContinueHandler = () => {\n\t\tthis.props.onInitPurchased();\n\t\tthis.props.history.push(\"/checkout\");\n\t};\n\n\trender() {\n\t\tconst disabledInfo = {\n\t\t\t...this.props.ingredients,\n\t\t};\n\t\tfor (let key in disabledInfo) {\n\t\t\tdisabledInfo[key] = disabledInfo[key] <= 0;\n\t\t}\n\t\t// {salad: true, meat: false, ...}\n\t\tlet orderSummary = null;\n\t\tlet burger = this.props.error ? (\n\t\t\t<p>Ingredients can't be loaded</p>\n\t\t) : (\n\t\t\t<Spinner />\n\t\t);\n\t\tif (this.props.ingredients) {\n\t\t\tburger = (\n\t\t\t\t<Aux>\n\t\t\t\t\t<Burger ingredients={this.props.ingredients} />\n\t\t\t\t\t<BuildControls\n\t\t\t\t\t\tingredientAdded={this.props.onIngredientAdded}\n\t\t\t\t\t\tingredientRemoved={this.props.onIngredientRemoved}\n\t\t\t\t\t\tdisabled={disabledInfo}\n\t\t\t\t\t\tpurchasable={this.updatePurchaseState(this.props.ingredients)}\n\t\t\t\t\t\tordered={this.purchaseHandler}\n\t\t\t\t\t\tisAuthenticated={this.props.isAuthenticated}\n\t\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\t/>\n\t\t\t\t</Aux>\n\t\t\t);\n\t\t\torderSummary = (\n\t\t\t\t<OrderSummary\n\t\t\t\t\tingredients={this.props.ingredients}\n\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\tpurchaseCancelled={this.purchaseCancelHandler}\n\t\t\t\t\tpurchaseContinued={this.purchaseContinueHandler}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Aux>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.purchasing}\n\t\t\t\t\tmodalClosed={this.purchaseCancelHandler}\n\t\t\t\t>\n\t\t\t\t\t{orderSummary}\n\t\t\t\t</Modal>\n\t\t\t\t{burger}\n\t\t\t</Aux>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tingredients: state.burgerBuilder.ingredients,\n\t\ttotalPrice: state.burgerBuilder.totalPrice,\n\t\terror: state.burgerBuilder.error,\n\t\tisAuthenticated: state.auth.token !== null,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n\t\tonIngredientRemoved: (ingName) =>\n\t\t\tdispatch(actions.removeIngredient(ingName)),\n\t\tonInitIngredients: () => dispatch(actions.initIngredient()),\n\t\tonInitPurchased: () => dispatch(actions.purchaseInit()),\n\t\tonSetAuthRedirectPath: (path) => dispatch(actions.setAuthRediectPath(path)),\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withErrorHandler(BurgerBuilder, axios));\n"]},"metadata":{},"sourceType":"module"}