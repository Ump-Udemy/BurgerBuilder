{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _defineProperty from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import{connect}from\"react-redux\";import{Redirect}from\"react-router-dom\";import classes from\"./Auth.module.css\";import Input from\"../../components/UI/Input/Input\";import Spinner from\"../../components/UI/Spinner/Spinner\";import Button from\"../../components/UI/Button/Button\";import*as actions from\"../../store/actions/index\";import{updateObject,checkValidity}from\"../../shared/utillity\";var Auth=/*#__PURE__*/function(_Component){_inherits(Auth,_Component);var _super=_createSuper(Auth);function Auth(){var _this;_classCallCheck(this,Auth);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={controls:{email:{elementType:\"input\",elementConfig:{type:\"email\",placeholder:\"Mail Address\"},value:\"\",validation:{required:true,isEmail:true},valid:false,touched:false},password:{elementType:\"input\",elementConfig:{type:\"password\",placeholder:\"Password\"},value:\"\",validation:{required:true,minLength:6},valid:false,touched:false}},isSignup:true};_this.inputChangedHandler=function(event,controlName){var updatedControls=updateObject(_this.state.controls,_defineProperty({},controlName,updateObject(_this.state.controls[controlName],{value:event.target.value,valid:checkValidity(event.target.value,_this.state.controls[controlName].validation),touched:true})));_this.setState({controls:updatedControls});};_this.switchAuthModeHandler=function(){_this.setState(function(prevState){return{isSignup:!prevState.isSignup};});};_this.submitHandler=function(event){event.preventDefault();_this.props.onAuth(_this.state.controls.email.value,_this.state.controls.password.value,_this.state.isSignup);};return _this;}_createClass(Auth,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.props.building&&this.props.authRedirectPath!==\"/\"){this.props.onSetAuthRedirectPath();}}},{key:\"render\",value:function render(){var _this2=this;var formElementsArray=[];for(var key in this.state.controls){formElementsArray.push({id:key,config:this.state.controls[key]});}var form=formElementsArray.map(function(formElement){return/*#__PURE__*/_jsx(Input,{elementType:formElement.config.elementType,elementConfig:formElement.config.elementConfig,value:formElement.config.value,invalid:!formElement.config.valid,shouldValidate:formElement.config.validation,touched:formElement.config.touched,changed:function changed(event){return _this2.inputChangedHandler(event,formElement.id);}},formElement.id);});if(this.props.loading){form=/*#__PURE__*/_jsx(Spinner,{});}var errorMessage=null;if(this.props.error){errorMessage=/*#__PURE__*/_jsx(\"p\",{children:this.props.error.message});}var authRedirect=null;if(this.props.isAuthenticated){authRedirect=/*#__PURE__*/_jsx(Redirect,{to:this.props.authRedirectPath});}return/*#__PURE__*/_jsxs(\"div\",{className:classes.Auth,children:[authRedirect,errorMessage,/*#__PURE__*/_jsxs(\"form\",{onSubmit:this.submitHandler,children:[form,/*#__PURE__*/_jsx(Button,{btnType:\"Success\",children:\"SUBMIT\"})]}),/*#__PURE__*/_jsxs(Button,{clicked:this.switchAuthModeHandler,btnType:\"Danger\",children:[\"SWITCH TO \",this.state.isSignup?\"SIGNIN\":\"SIGNUP\"]})]});}}]);return Auth;}(Component);var mapStateToProps=function mapStateToProps(state){return{loading:state.auth.loading,error:state.auth.error,isAuthenticated:state.auth.token!==null,building:state.burgerBuilder.building,authRedirectPath:state.auth.authRedirectPath};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{onAuth:function onAuth(email,password,isSignup){return dispatch(actions.auth(email,password,isSignup));},onSetAuthRedirectPath:function onSetAuthRedirectPath(){return dispatch(actions.setAuthRediectPath(\"/\"));}};};export default connect(mapStateToProps,mapDispatchToProps)(Auth);","map":{"version":3,"sources":["/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/Auth/Auth.js"],"names":["React","Component","connect","Redirect","classes","Input","Spinner","Button","actions","updateObject","checkValidity","Auth","state","controls","email","elementType","elementConfig","type","placeholder","value","validation","required","isEmail","valid","touched","password","minLength","isSignup","inputChangedHandler","event","controlName","updatedControls","target","setState","switchAuthModeHandler","prevState","submitHandler","preventDefault","props","onAuth","building","authRedirectPath","onSetAuthRedirectPath","formElementsArray","key","push","id","config","form","map","formElement","loading","errorMessage","error","message","authRedirect","isAuthenticated","mapStateToProps","auth","token","burgerBuilder","mapDispatchToProps","dispatch","setAuthRediectPath"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\n\nimport classes from \"./Auth.module.css\";\n\nimport Input from \"../../components/UI/Input/Input\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport Button from \"../../components/UI/Button/Button\";\nimport * as actions from \"../../store/actions/index\";\nimport { updateObject, checkValidity } from \"../../shared/utillity\";\n\nclass Auth extends Component {\n\tstate = {\n\t\tcontrols: {\n\t\t\temail: {\n\t\t\t\telementType: \"input\",\n\t\t\t\telementConfig: {\n\t\t\t\t\ttype: \"email\",\n\t\t\t\t\tplaceholder: \"Mail Address\",\n\t\t\t\t},\n\t\t\t\tvalue: \"\",\n\t\t\t\tvalidation: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tisEmail: true,\n\t\t\t\t},\n\t\t\t\tvalid: false,\n\t\t\t\ttouched: false,\n\t\t\t},\n\t\t\tpassword: {\n\t\t\t\telementType: \"input\",\n\t\t\t\telementConfig: {\n\t\t\t\t\ttype: \"password\",\n\t\t\t\t\tplaceholder: \"Password\",\n\t\t\t\t},\n\t\t\t\tvalue: \"\",\n\t\t\t\tvalidation: {\n\t\t\t\t\trequired: true,\n\t\t\t\t\tminLength: 6,\n\t\t\t\t},\n\t\t\t\tvalid: false,\n\t\t\t\ttouched: false,\n\t\t\t},\n\t\t},\n\t\tisSignup: true,\n\t};\n\n\tcomponentDidMount() {\n\t\tif (!this.props.building && this.props.authRedirectPath !== \"/\") {\n\t\t\tthis.props.onSetAuthRedirectPath();\n\t\t}\n\t}\n\n\tinputChangedHandler = (event, controlName) => {\n\t\tconst updatedControls = updateObject(this.state.controls, {\n\t\t\t[controlName]: updateObject(this.state.controls[controlName], {\n\t\t\t\tvalue: event.target.value,\n\t\t\t\tvalid: checkValidity(\n\t\t\t\t\tevent.target.value,\n\t\t\t\t\tthis.state.controls[controlName].validation\n\t\t\t\t),\n\t\t\t\ttouched: true,\n\t\t\t}),\n\t\t});\n\t\tthis.setState({ controls: updatedControls });\n\t};\n\n\tswitchAuthModeHandler = () => {\n\t\tthis.setState((prevState) => {\n\t\t\treturn { isSignup: !prevState.isSignup };\n\t\t});\n\t};\n\n\tsubmitHandler = (event) => {\n\t\tevent.preventDefault();\n\t\tthis.props.onAuth(\n\t\t\tthis.state.controls.email.value,\n\t\t\tthis.state.controls.password.value,\n\t\t\tthis.state.isSignup\n\t\t);\n\t};\n\n\trender() {\n\t\tconst formElementsArray = [];\n\t\tfor (let key in this.state.controls) {\n\t\t\tformElementsArray.push({\n\t\t\t\tid: key,\n\t\t\t\tconfig: this.state.controls[key],\n\t\t\t});\n\t\t}\n\t\tlet form = formElementsArray.map((formElement) => (\n\t\t\t<Input\n\t\t\t\tkey={formElement.id}\n\t\t\t\telementType={formElement.config.elementType}\n\t\t\t\telementConfig={formElement.config.elementConfig}\n\t\t\t\tvalue={formElement.config.value}\n\t\t\t\tinvalid={!formElement.config.valid}\n\t\t\t\tshouldValidate={formElement.config.validation}\n\t\t\t\ttouched={formElement.config.touched}\n\t\t\t\tchanged={(event) => this.inputChangedHandler(event, formElement.id)}\n\t\t\t/>\n\t\t));\n\t\tif (this.props.loading) {\n\t\t\tform = <Spinner />;\n\t\t}\n\n\t\tlet errorMessage = null;\n\t\tif (this.props.error) {\n\t\t\terrorMessage = <p>{this.props.error.message}</p>;\n\t\t}\n\t\tlet authRedirect = null;\n\t\tif (this.props.isAuthenticated) {\n\t\t\tauthRedirect = <Redirect to={this.props.authRedirectPath} />;\n\t\t}\n\t\treturn (\n\t\t\t<div className={classes.Auth}>\n\t\t\t\t{authRedirect}\n\t\t\t\t{errorMessage}\n\t\t\t\t<form onSubmit={this.submitHandler}>\n\t\t\t\t\t{form}\n\t\t\t\t\t<Button btnType='Success'>SUBMIT</Button>\n\t\t\t\t</form>\n\t\t\t\t<Button clicked={this.switchAuthModeHandler} btnType='Danger'>\n\t\t\t\t\tSWITCH TO {this.state.isSignup ? \"SIGNIN\" : \"SIGNUP\"}\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tloading: state.auth.loading,\n\t\terror: state.auth.error,\n\t\tisAuthenticated: state.auth.token !== null,\n\t\tbuilding: state.burgerBuilder.building,\n\t\tauthRedirectPath: state.auth.authRedirectPath,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonAuth: (email, password, isSignup) =>\n\t\t\tdispatch(actions.auth(email, password, isSignup)),\n\t\tonSetAuthRedirectPath: () => dispatch(actions.setAuthRediectPath(\"/\")),\n\t};\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Auth);\n"]},"metadata":{},"sourceType":"module"}