{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as burgerBuilderActions from \"../../store/actions/index\";\n\nclass BurgerBuilder extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      purchasing: false,\n      loading: false\n    };\n\n    this.purchaseHandler = () => {\n      this.setState({\n        purchasing: true\n      });\n    };\n\n    this.purchaseCancelHandler = () => {\n      this.setState({\n        purchasing: false\n      });\n    };\n\n    this.purchaseContinueHandler = () => {\n      this.props.history.push(\"/checkout\");\n    };\n  }\n\n  componentDidMount() {\n    this.props.onInitIngredients();\n  }\n\n  updatePurchaseState(ingredients) {\n    const sum = Object.keys(ingredients).map(igKey => {\n      return ingredients[igKey];\n    }).reduce((sum, el) => {\n      return sum + el;\n    }, 0);\n    return sum > 0;\n  }\n\n  render() {\n    const disabledInfo = { ...this.props.ingredients\n    };\n\n    for (let key in disabledInfo) {\n      disabledInfo[key] = disabledInfo[key] <= 0;\n    } // {salad: true, meat: false, ...}\n\n\n    let orderSummary = null;\n    let burger = this.props.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Ingredients can't be loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 4\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 4\n    }, this);\n\n    if (this.props.ingredients) {\n      burger = /*#__PURE__*/_jsxDEV(Aux, {\n        children: [/*#__PURE__*/_jsxDEV(Burger, {\n          ingredients: this.props.ingredients\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(BuildControls, {\n          ingredientAdded: this.props.onIngredientAdded,\n          ingredientRemoved: this.props.onIngredientRemoved,\n          disabled: disabledInfo,\n          purchasable: this.updatePurchaseState(this.props.ingredients),\n          ordered: this.purchaseHandler,\n          price: this.props.totalPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this);\n      orderSummary = /*#__PURE__*/_jsxDEV(OrderSummary, {\n        ingredients: this.props.ingredients,\n        price: this.props.totalPrice,\n        purchaseCancelled: this.purchaseCancelHandler,\n        purchaseContinued: this.purchaseContinueHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.purchasing,\n        modalClosed: this.purchaseCancelHandler,\n        children: orderSummary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 5\n      }, this), burger]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ingredients: state.ingredients,\n    totalPrice: state.totalPrice,\n    error: state.error\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientAdded: ingName => dispatch(burgerBuilderActions.addIngredient(ingName)),\n    onIngredientRemoved: ingName => dispatch(burgerBuilderActions.removeIngredient(ingName)),\n    onInitIngredients: () => dispatch(burgerBuilderActions.initIngredient())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","burgerBuilderActions","BurgerBuilder","state","purchasing","loading","purchaseHandler","setState","purchaseCancelHandler","purchaseContinueHandler","props","history","push","componentDidMount","onInitIngredients","updatePurchaseState","ingredients","sum","Object","keys","map","igKey","reduce","el","render","disabledInfo","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","totalPrice","mapStateToProps","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredient"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as burgerBuilderActions from \"../../store/actions/index\";\n\nclass BurgerBuilder extends Component {\n\tstate = {\n\t\tpurchasing: false,\n\t\tloading: false,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.props.onInitIngredients();\n\t}\n\n\tupdatePurchaseState(ingredients) {\n\t\tconst sum = Object.keys(ingredients)\n\t\t\t.map((igKey) => {\n\t\t\t\treturn ingredients[igKey];\n\t\t\t})\n\t\t\t.reduce((sum, el) => {\n\t\t\t\treturn sum + el;\n\t\t\t}, 0);\n\t\treturn sum > 0;\n\t}\n\n\tpurchaseHandler = () => {\n\t\tthis.setState({ purchasing: true });\n\t};\n\n\tpurchaseCancelHandler = () => {\n\t\tthis.setState({ purchasing: false });\n\t};\n\n\tpurchaseContinueHandler = () => {\n\t\tthis.props.history.push(\"/checkout\");\n\t};\n\n\trender() {\n\t\tconst disabledInfo = {\n\t\t\t...this.props.ingredients,\n\t\t};\n\t\tfor (let key in disabledInfo) {\n\t\t\tdisabledInfo[key] = disabledInfo[key] <= 0;\n\t\t}\n\t\t// {salad: true, meat: false, ...}\n\t\tlet orderSummary = null;\n\t\tlet burger = this.props.error ? (\n\t\t\t<p>Ingredients can't be loaded</p>\n\t\t) : (\n\t\t\t<Spinner />\n\t\t);\n\t\tif (this.props.ingredients) {\n\t\t\tburger = (\n\t\t\t\t<Aux>\n\t\t\t\t\t<Burger ingredients={this.props.ingredients} />\n\t\t\t\t\t<BuildControls\n\t\t\t\t\t\tingredientAdded={this.props.onIngredientAdded}\n\t\t\t\t\t\tingredientRemoved={this.props.onIngredientRemoved}\n\t\t\t\t\t\tdisabled={disabledInfo}\n\t\t\t\t\t\tpurchasable={this.updatePurchaseState(this.props.ingredients)}\n\t\t\t\t\t\tordered={this.purchaseHandler}\n\t\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\t/>\n\t\t\t\t</Aux>\n\t\t\t);\n\t\t\torderSummary = (\n\t\t\t\t<OrderSummary\n\t\t\t\t\tingredients={this.props.ingredients}\n\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\tpurchaseCancelled={this.purchaseCancelHandler}\n\t\t\t\t\tpurchaseContinued={this.purchaseContinueHandler}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Aux>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.purchasing}\n\t\t\t\t\tmodalClosed={this.purchaseCancelHandler}\n\t\t\t\t>\n\t\t\t\t\t{orderSummary}\n\t\t\t\t</Modal>\n\t\t\t\t{burger}\n\t\t\t</Aux>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tingredients: state.ingredients,\n\t\ttotalPrice: state.totalPrice,\n\t\terror: state.error,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonIngredientAdded: (ingName) =>\n\t\t\tdispatch(burgerBuilderActions.addIngredient(ingName)),\n\t\tonIngredientRemoved: (ingName) =>\n\t\t\tdispatch(burgerBuilderActions.removeIngredient(ingName)),\n\t\tonInitIngredients: () => dispatch(burgerBuilderActions.initIngredient()),\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withErrorHandler(BurgerBuilder, axios));\n"]},"metadata":{},"sourceType":"module"}