{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/BurgerBuilder/BurgerBuilder.js\";\nimport React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as actions from \"../../store/actions/index\";\n\nclass BurgerBuilder extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      purchasing: false,\n      loading: false\n    };\n\n    this.purchaseHandler = () => {\n      if (this.props.isAuthenticated) {\n        this.setState({\n          purchasing: true\n        });\n      } else {\n        this.props.history.push(\"/auth\");\n      }\n    };\n\n    this.purchaseCancelHandler = () => {\n      this.setState({\n        purchasing: false\n      });\n    };\n\n    this.purchaseContinueHandler = () => {\n      this.props.onInitPurchased();\n      this.props.history.push(\"/checkout\");\n    };\n  }\n\n  componentDidMount() {\n    this.props.onInitIngredients();\n  }\n\n  updatePurchaseState(ingredients) {\n    const sum = Object.keys(ingredients).map(igKey => {\n      return ingredients[igKey];\n    }).reduce((sum, el) => {\n      return sum + el;\n    }, 0);\n    return sum > 0;\n  }\n\n  render() {\n    const disabledInfo = { ...this.props.ingredients\n    };\n\n    for (let key in disabledInfo) {\n      disabledInfo[key] = disabledInfo[key] <= 0;\n    } // {salad: true, meat: false, ...}\n\n\n    let orderSummary = null;\n    let burger = this.props.error ? /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Ingredients can't be loaded\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 4\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this);\n\n    if (this.props.ingredients) {\n      burger = /*#__PURE__*/_jsxDEV(Aux, {\n        children: [/*#__PURE__*/_jsxDEV(Burger, {\n          ingredients: this.props.ingredients\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(BuildControls, {\n          ingredientAdded: this.props.onIngredientAdded,\n          ingredientRemoved: this.props.onIngredientRemoved,\n          disabled: disabledInfo,\n          purchasable: this.updatePurchaseState(this.props.ingredients),\n          ordered: this.purchaseHandler,\n          isAuthenticated: this.props.isAuthenticated,\n          price: this.props.totalPrice\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 5\n      }, this);\n      orderSummary = /*#__PURE__*/_jsxDEV(OrderSummary, {\n        ingredients: this.props.ingredients,\n        price: this.props.totalPrice,\n        purchaseCancelled: this.purchaseCancelHandler,\n        purchaseContinued: this.purchaseContinueHandler\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this);\n    }\n\n    return /*#__PURE__*/_jsxDEV(Aux, {\n      children: [/*#__PURE__*/_jsxDEV(Modal, {\n        show: this.state.purchasing,\n        modalClosed: this.purchaseCancelHandler,\n        children: orderSummary\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this), burger]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 4\n    }, this);\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    ingredients: state.burgerBuilder.ingredients,\n    totalPrice: state.burgerBuilder.totalPrice,\n    error: state.burgerBuilder.error,\n    isAuthenticated: state.auth.token !== null\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onIngredientAdded: ingName => dispatch(actions.addIngredient(ingName)),\n    onIngredientRemoved: ingName => dispatch(actions.removeIngredient(ingName)),\n    onInitIngredients: () => dispatch(actions.initIngredient()),\n    onInitPurchased: () => dispatch(actions.purchaseInit())\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(withErrorHandler(BurgerBuilder, axios));","map":{"version":3,"sources":["/Users/ump/Desktop/Udemy/React The Complete Guide(incl Hooks,React Rounter,Redux)/burgerbuilder/src/containers/BurgerBuilder/BurgerBuilder.js"],"names":["React","Component","connect","Aux","Burger","BuildControls","Modal","OrderSummary","axios","Spinner","withErrorHandler","actions","BurgerBuilder","state","purchasing","loading","purchaseHandler","props","isAuthenticated","setState","history","push","purchaseCancelHandler","purchaseContinueHandler","onInitPurchased","componentDidMount","onInitIngredients","updatePurchaseState","ingredients","sum","Object","keys","map","igKey","reduce","el","render","disabledInfo","key","orderSummary","burger","error","onIngredientAdded","onIngredientRemoved","totalPrice","mapStateToProps","burgerBuilder","auth","token","mapDispatchToProps","dispatch","ingName","addIngredient","removeIngredient","initIngredient","purchaseInit"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\n\nimport Aux from \"../../hoc/Aux/Aux\";\nimport Burger from \"../../components/Burger/Burger\";\nimport BuildControls from \"../../components/Burger/BuildControls/BuildControls\";\nimport Modal from \"../../components/UI/Modal/Modal\";\nimport OrderSummary from \"../../components/Burger/OrderSummary/OrderSummary\";\nimport axios from \"../../axios-orders\";\nimport Spinner from \"../../components/UI/Spinner/Spinner\";\nimport withErrorHandler from \"../../hoc/withErrorHandler/withErrorHandler\";\nimport * as actions from \"../../store/actions/index\";\n\nclass BurgerBuilder extends Component {\n\tstate = {\n\t\tpurchasing: false,\n\t\tloading: false,\n\t};\n\n\tcomponentDidMount() {\n\t\tthis.props.onInitIngredients();\n\t}\n\n\tupdatePurchaseState(ingredients) {\n\t\tconst sum = Object.keys(ingredients)\n\t\t\t.map((igKey) => {\n\t\t\t\treturn ingredients[igKey];\n\t\t\t})\n\t\t\t.reduce((sum, el) => {\n\t\t\t\treturn sum + el;\n\t\t\t}, 0);\n\t\treturn sum > 0;\n\t}\n\n\tpurchaseHandler = () => {\n\t\tif (this.props.isAuthenticated) {\n\t\t\tthis.setState({ purchasing: true });\n\t\t} else {\n\t\t\tthis.props.history.push(\"/auth\");\n\t\t}\n\t};\n\n\tpurchaseCancelHandler = () => {\n\t\tthis.setState({ purchasing: false });\n\t};\n\n\tpurchaseContinueHandler = () => {\n\t\tthis.props.onInitPurchased();\n\t\tthis.props.history.push(\"/checkout\");\n\t};\n\n\trender() {\n\t\tconst disabledInfo = {\n\t\t\t...this.props.ingredients,\n\t\t};\n\t\tfor (let key in disabledInfo) {\n\t\t\tdisabledInfo[key] = disabledInfo[key] <= 0;\n\t\t}\n\t\t// {salad: true, meat: false, ...}\n\t\tlet orderSummary = null;\n\t\tlet burger = this.props.error ? (\n\t\t\t<p>Ingredients can't be loaded</p>\n\t\t) : (\n\t\t\t<Spinner />\n\t\t);\n\t\tif (this.props.ingredients) {\n\t\t\tburger = (\n\t\t\t\t<Aux>\n\t\t\t\t\t<Burger ingredients={this.props.ingredients} />\n\t\t\t\t\t<BuildControls\n\t\t\t\t\t\tingredientAdded={this.props.onIngredientAdded}\n\t\t\t\t\t\tingredientRemoved={this.props.onIngredientRemoved}\n\t\t\t\t\t\tdisabled={disabledInfo}\n\t\t\t\t\t\tpurchasable={this.updatePurchaseState(this.props.ingredients)}\n\t\t\t\t\t\tordered={this.purchaseHandler}\n\t\t\t\t\t\tisAuthenticated={this.props.isAuthenticated}\n\t\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\t/>\n\t\t\t\t</Aux>\n\t\t\t);\n\t\t\torderSummary = (\n\t\t\t\t<OrderSummary\n\t\t\t\t\tingredients={this.props.ingredients}\n\t\t\t\t\tprice={this.props.totalPrice}\n\t\t\t\t\tpurchaseCancelled={this.purchaseCancelHandler}\n\t\t\t\t\tpurchaseContinued={this.purchaseContinueHandler}\n\t\t\t\t/>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<Aux>\n\t\t\t\t<Modal\n\t\t\t\t\tshow={this.state.purchasing}\n\t\t\t\t\tmodalClosed={this.purchaseCancelHandler}\n\t\t\t\t>\n\t\t\t\t\t{orderSummary}\n\t\t\t\t</Modal>\n\t\t\t\t{burger}\n\t\t\t</Aux>\n\t\t);\n\t}\n}\n\nconst mapStateToProps = (state) => {\n\treturn {\n\t\tingredients: state.burgerBuilder.ingredients,\n\t\ttotalPrice: state.burgerBuilder.totalPrice,\n\t\terror: state.burgerBuilder.error,\n\t\tisAuthenticated: state.auth.token !== null,\n\t};\n};\n\nconst mapDispatchToProps = (dispatch) => {\n\treturn {\n\t\tonIngredientAdded: (ingName) => dispatch(actions.addIngredient(ingName)),\n\t\tonIngredientRemoved: (ingName) =>\n\t\t\tdispatch(actions.removeIngredient(ingName)),\n\t\tonInitIngredients: () => dispatch(actions.initIngredient()),\n\t\tonInitPurchased: () => dispatch(actions.purchaseInit()),\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(withErrorHandler(BurgerBuilder, axios));\n"]},"metadata":{},"sourceType":"module"}